/*! angular-pageslide-directive 2020-12-21 */

!function(e,t){"function"==typeof define&&define.amd?define(["angular"],t):"object"==typeof module&&module.exports?module.exports=t(require("angular")):t(e.angular)}(this,function(z){z.module("pageslide-directive",[]).directive("pageslide",["$document","$timeout","$window",function(g,m,x){return{restrict:"EA",transclude:!1,scope:{psOpen:"=?",psAutoClose:"@",psSide:"@",psSpeed:"@",psClass:"@",psSize:"@",psZindex:"@",psPush:"@",psContainer:"@",psKeyListener:"@",psBodyClass:"@",psClickOutside:"@",psRemoveHeight:"@",onopen:"&?",onclose:"&?"},link:function(s,e,t){var o={};o.side=s.psSide||"right",o.speed=s.psSpeed||"0.5",o.size=s.psSize||"300px",o.zindex=s.psZindex||1e3,o.className=s.psClass||"ng-pageslide",o.push="true"===s.psPush,o.container=s.psContainer||!1,o.keyListener="true"===s.psKeyListener,o.bodyClass=s.psBodyClass||!1,o.clickOutside="false"!==s.psClickOutside,o.autoClose="true"===s.psAutoClose,o.removeHeight=s.psRemoveHeight||!1,o.height=0,o.defaultSize=o.size,o.push=o.push&&!o.container,e.addClass(o.className);var i,n,l=!1;function p(e){return 0===e.indexOf("calc(")?e.replace("calc(","calc(-").replace(" - "," + "):"-"+o.size}function a(e){var t=e.touches&&e.touches[0]||e.target;l&&n.contains(t)&&!i.contains(t)&&(l=!1,s.psOpen=!1,s.$apply()),s.psOpen&&(l=!0)}function c(e){if(o.bodyClass){var t=o.className+"-body",s=new RegExp(t+"-closed|"+t+"-open");n.className=n.className.replace(s,"");var i=t+"-"+e;" "!==n.className[n.className.length-1]?n.className+=" "+i:n.className+=i}}if(n=o.container?document.getElementById(o.container):document.body,o.removeHeight&&(o.removeHeight=z.element(o.removeHeight),o.removeHeight.length||(o.removeHeight=null)),"div"!==(i=e[0]).tagName.toLowerCase()&&"pageslide"!==i.tagName.toLowerCase())throw new Error("Pageslide can only be applied to <div> or <pageslide> elements");if(0===i.children.length)throw new Error("You need to have content inside the <pageslide>");function r(){s.psOpen?"function"==typeof s.onopen&&s.onopen():"function"==typeof s.onclose&&s.onclose()}function h(e,t){switch(t.side){case"right":case"left":e.style.width=t.size,e.style.height=t.height?"calc(100% - "+t.height+"px)":"100%",e.style.top=t.height?"":"0px",e.style.bottom="0px";break;case"top":case"bottom":e.style.height=t.height?"calc("+t.defaultSize+" - "+t.height+"px)":t.size,e.style.width="100%",e.style.left="0px",e.style.right="0px"}s.psOpen?u(e,t):d(e,t)}function d(e,t){switch(t.side){case"right":e.style.right=p(t.size),t.push&&(n.style.right="0px",n.style.left="0px");break;case"left":e.style.left=p(t.size),t.push&&(n.style.left="0px",n.style.right="0px");break;case"top":e.style.top=p(t.size),t.push&&(n.style.top="0px",n.style.bottom="0px");break;case"bottom":e.style.bottom=p(t.size),t.push&&(n.style.bottom="0px",n.style.top="0px")}t.keyListener&&g.off("keydown",y),t.clickOutside&&g.off("touchend click",a),l=!1,c("closed"),s.psOpen=!1}function u(e,t){switch(t.side){case"right":e.style.right="0px",t.push&&(n.style.right=t.size,n.style.left=p(t.size));break;case"left":e.style.left="0px",t.push&&(n.style.left=t.size,n.style.right=p(t.size));break;case"top":e.style.top=t.height+"px",t.push&&(n.style.top=t.size,n.style.bottom=p(t.size));break;case"bottom":e.style.bottom="0px",t.push&&(n.style.bottom=t.size,n.style.top=p(t.size))}s.psOpen=!0,t.keyListener&&g.on("keydown",y),t.clickOutside&&g.on("touchend click",a),c("open")}function y(e){27===(e.keyCode||e.which)&&(d(i,o),m(function(){s.$apply()}))}function f(){d(i,o)}z.element(i.children),n.appendChild(i),i.style.zIndex=o.zindex,i.style.position="fixed",i.style.transitionDuration=o.speed+"s",i.style.webkitTransitionDuration=o.speed+"s",i.style.height=o.size,i.style.transitionProperty="top, bottom, left, right",o.push&&(n.style.position="absolute",n.style.transitionDuration=o.speed+"s",n.style.webkitTransitionDuration=o.speed+"s",n.style.transitionProperty="top, bottom, left, right"),o.container&&(i.style.position="absolute",n.style.position="relative",n.style.overflow="hidden"),i.addEventListener("transitionend",r),h(i,o),s.$watch("psOpen",function(e){e?u(i,o):d(i,o)}),s.$watch("psSize",function(e,t){t!==e&&(o.size=e,h(i,o))}),s.$on("$destroy",function(){i.parentNode===n&&(o.clickOutside&&g.off("touchend click",a),n.removeChild(i)),i.removeEventListener("transitionend",r),x.removeEventListener("beforeunload",f)}),o.autoClose&&(s.$on("$locationChangeStart",function(){d(i,o)}),s.$on("$stateChangeStart",function(){d(i,o)}),x.addEventListener("beforeunload",f)),o.removeHeight&&s.$watch(function(){return o.removeHeight[0].offsetHeight+o.removeHeight[0].offsetTop},function(e,t){e!==t&&function(e){var t;switch(o.height=parseInt(e,10),o.side){case"top":t=o.height?"calc("+o.defaultSize+" - "+o.height+"px)":o.size,o.size=t,i.style.height=o.size,o.push?i.style.top="0px":i.style.top=s.psOpen?o.height+"px":p(t);break;case"bottom":t=o.height?"calc("+o.defaultSize+" - "+o.height+"px)":o.size,o.size=t,i.style.height=o.size,i.style.top="";break;default:t=o.height?"calc(100% - "+o.height+"px)":"100%",i.style.height=t,i.style.top=o.height?"":"0px"}}(e)})}}}])});